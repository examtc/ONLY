<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>商品列表</title>
    <link rel="stylesheet" type="text/css" href="../../styles/pages/list/list1.css" />
</head>

<body>
    <!-- 头部 -->
    <div class="outheader">
        <div class="head">
            <span>1件包邮</span>
            <ul>
                <li class="index_login">
                    <i></i>
                    <a href="../login/login.html">登录</a>
                    <a href="../regist/regist.html">注册</a>
                    <span>退出</span>
                </li>
                <li class="index_search">
                    <span><img src="../../img/index/放大镜.png"></span>
                    <i>搜索</i>
                    <div>
                        <input type="text" placeholder="想找什么随便搜...">
                        <label></label>
                        <span>搜索</span>
                    </div>
                </li>

                <li class="specialCart" style="color:#ff0000">
                    <span><img src="../../img/index/购物车.png"></span>
                    购物车<i>0</i>件
                </li>
                <li>
                    <span><img src="../../img/index/订单.png"></span>
                    我的订单
                </li>
                <li>
                    <span><img src="../../img/index/客服.png"></span>
                    客服热线
                </li>
                <li>
                    关注ONLY微信
                    <dl class="wechatCode" style="z-index:10000">
                        <dt>
                            <img src="../../img/index/code1.png" </dt> <dd>
                            微信扫一扫关注<br>第一时间了解品牌咨询
                            </dd>
                    </dl>
                </li>
                <li>
                    专属导购
                    <dl class="shopCode">
                        <dt>
                            <img src="../../img/index/code2.jpg" </dt> <dd>
                            微信扫一扫<br>添加您专属的时尚导购
                            </dd>
                    </dl>
                </li>
                <li>
                    手机购物
                    <dl class="phoneCode">
                        <dt>
                            <img src="../../img/index/code3.png" </dt> <dd>
                            微信扫一扫购物<br>众多潮流单品住您焕新造型
                            </dd>
                    </dl>
                </li>
            </ul>
        </div>
    </div>

    <!-- 导航栏 -->
    <div class="outnav">
        <div class="nav">
            <a href="../index/index.html"><img src="../../img/index/logo.png"></a>
            <ul>
                <li>首页</li>
                <li>
                    所有商品
                    <div class="secondNav">
                        <ul>
                            <h3><a href="">裙装</a></h3>
                            <li><a href="">连衣裙</a></li>
                            <li><a href="">半身裙</a></li>
                        </ul>
                        <ul>
                            <h3><a href="">裤装</a></h3>
                            <li><a href="">牛仔裤</a></li>
                            <li><a href="">休闲裤</a></li>
                            <li><a href="">背带/连体裤</a></li>
                        </ul>
                        <ul>
                            <h3><a href="">上装</a></h3>
                            <li><a href="">针织衫</a></li>
                            <li><a href="">卫衣</a></li>
                            <li><a href="">衬衫</a></li>
                            <li><a href="">T恤</a></li>
                        </ul>
                        <ul>
                            <h3><a href="">外套</a></h3>
                            <li><a href="">风衣/外套</a></li>
                            <li><a href="">短款外套</a></li>
                            <li><a href="">毛呢大衣</a></li>
                            <li><a href="">西服/西装</a></li>
                        </ul>
                        <img src="../../img/index/nav1.jpg">
                    </div>
                </li>
                <li>
                    热销推荐
                    <div class="secondNav">
                        <ul>
                            <h3><a href="">仙气连衣裙</a></h3>
                            <li><a href="">雪纺连衣裙</a></li>
                            <li><a href="">修身连衣裙</a></li>
                            <li><a href="">多件套连衣裙</a></li>
                            <li><a href="">针织连衣裙</a></li>
                        </ul>
                        <ul>
                            <h3><a href="">潮流T恤</a></h3>
                            <li><a href="">长袖T恤</a></li>
                            <li><a href="">宽松T恤</a></li>
                            <li><a href="">修身T恤</a></li>
                        </ul>
                        <ul>
                            <h3><a href="">酷感皮衣</a></h3>
                            <li><a href="">短款皮衣</a></li>
                            <li><a href="">中长款皮衣</a></li>
                            <li><a href="">皮裙/皮裤</a></li>
                        </ul>
                        <ul>
                            <h3><a href="">气质衬衫</a></h3>
                            <li><a href="">中长袖衬衫</a></li>
                            <li><a href="">蕾丝/雪纺</a></li>
                            <li><a href="">短袖衬衫</a></li>
                        </ul>
                        <img src="../../img/index/nav2.jpg">
                    </div>
                </li>
                <li>
                    夏日新品
                    <div class="secondNav">
                        <ul>
                            <h3><a href="">2019全部新品</a></h3>
                            <li><a href="">全部新品</a></li>
                        </ul>
                        <ul>
                            <h3><a href="">新品到店</a></h3>
                            <li><a href="">5月14日到店</a></li>
                            <li><a href="">5月10日到店</a></li>
                            <li><a href="">5月7日到店</a></li>
                            <li><a href="">4月23日到店</a></li>
                            <li><a href="">4月16日到店</a></li>
                            <li><a href="">4月12日到店</a></li>
                        </ul>
                        <img src="../../img/index/nav3.jpg">
                    </div>
                </li>
                <li>
                    性感家居
                    <div class="secondNav">
                        <ul>
                            <h3><a href="">家居上装</a></h3>
                            <li><a href="">吊带背心</a></li>
                            <li><a href="">家具T恤</a></li>
                        </ul>
                        <ul>
                            <h3><a href="">家居下装</a></h3>
                            <li><a href="">家居休闲裤</a></li>
                        </ul>
                        <img src="../../img/index/nav4.jpg">
                    </div>
                </li>
                <li>
                    ONLYPLAY
                    <div class="secondNav">
                        <ul>
                            <h3><a href="">全部产品</a></h3>
                            <li><a href="">全部</a></li>
                        </ul>
                        <ul>
                            <h3><a href="">运动上装</a></h3>
                            <li><a href="">运动文胸</a></li>
                            <li><a href="">运动背心</a></li>
                        </ul>
                        <ul>
                            <h3><a href="">运动下装</a></h3>
                            <li><a href="">运动短裤</a></li>
                            <li><a href="">运动长裤</a></li>
                        </ul>
                        <img src="../../img/index/nav5.jpg">
                    </div>
                </li>
                <li>
                    漫威合作款
                </li>
                <li>
                    线上专享区
                    <div class="secondNav">
                        <ul>
                            <h3><a href="">全部专项款</a></h3>
                            <li><a href="">5折专区</a></li>
                            <li><a href="">7折专区</a></li>
                        </ul>
                        <ul>
                            <h3><a href="">5折上装</a></h3>
                            <li><a href="">5折风衣/外套</a></li>
                            <li><a href="">5折针织衫</a></li>
                        </ul>
                        <ul>
                            <h3><a href="">5折裤装</a></h3>
                            <li><a href="">5折休闲裤</a></li>
                            <li><a href="">5折牛仔裤</a></li>
                        </ul>
                        <ul>
                            <h3><a href="">5折裙装</a></h3>
                            <li><a href="">5折连衣裙</a></li>
                        </ul>
                        <img src="../../img/index/nav6.jpg">
                    </div>
                </li>
                <li>
                    爱消除联名款
                    <div class="secondNav">
                        <ul>
                            <h3><a href="">全部T恤</a></h3>
                        </ul>
                        <img src="../../img/index/nav7.jpg">
                    </div>
                </li>
                <li>会员中心</li>
            </ul>
        </div>
    </div>

    <div class="list1_banner">
        <h6>首页/所有商品</h6>
        <img src="../../img/goodlist/goodlist1_banner.jpg">
    </div>
    <div class="list1_main">
        <ul class="list1_main_goodslist">
        </ul>
        <div class="list1_main_top">
            <span>人气</span>
            <i></i>
            <span>销量</span>
            <i></i>
            <span>新品</span>
            <i></i>
            <span>价格</span>
            <i></i>
            <input type="text" placeholder="最低价"> -
            <input type="text" placeholder="最高价">
            <button>确定</button>
            <strong>共<b>470</b>件商品</strong>
        </div>
        <ul class="list1_main_goods">
        </ul>

    </div>

    <!-- 尾部 -->
    <div class="outfoot">
        <div class="foot">
            <div class="foot_accect">
                <dl>
                    <dt><img src="../../img/index/accect.png"></dt>
                    <dd>用户服务协议</dd>
                </dl>
                <button>点击查看</button>
            </div>
            <div class="foot_line"></div>
            <div class="foot_code">
                <dl>
                    <dt><img src="../../img/index/code2.jpg"></dt>
                    <dd>专属时尚顾问</dd>
                </dl>
                <dl>
                    <dt><img src="../../img/index/code3.png"></dt>
                    <dd>小程序</dd>
                </dl>
                <dl>
                    <dt><img src="../../img/index/code1.png"></dt>
                    <dd>官方微信</dd>
                </dl>
            </div>
            <div class="foot_line"></div>
            <div class="foot_phone">
                <dl>
                    <dt><img src="../../img/index/phone.png"></dt>
                    <dd>
                        售后服务热线<br>400-862-8888<br>服务时间：9:00-21:00
                    </dd>
                </dl>
            </div>
        </div>
    </div>

    <!-- 在线答疑 -->
    <div class="service">
        <a href="">在线客服 即时答疑 <img src="../../img/index/service.png"> 服务时间（工作日9:00-24:00）</a>
    </div>

    <!-- 其他商标 -->
    <div class="otherBrands">
        <ul>
            <li><img src="../../img/index/logo_footer1.png"></li>
            <li><img src="../../img/index/logo_footer2.png"></li>
            <li style="margin-right:0"><img src="../../img/index/logo_footer3.png"></li>
        </ul>
    </div>

    <!-- 版权 -->
    <div class="banquan">
        © 2013 Bestseller. All Rights Reserved<br>津ICP备12007886号 -3（营业执照）
    </div>
</body>
<script src="../../static/script/require.js" data-main="list1.js" type="text/javascript"></script>
<script src="../../scripts/libs/jquery-2.0.3.js"></script>
<script>

    // 封装好的ajaxGet方法
    // function xhrGet(url, data) {
    //     return new Promise((resolve, reject) => {
    //         var xhr = new XMLHttpRequest();
    //         if (typeof data !== "function" && data instanceof Object) {
    //             // 拼接字符串; 
    //             var _arr = [];
    //             for (var key in data) {
    //                 _arr.push(`${key}=${data[key]}`)
    //             }
    //             var _symbol = /\?/.test(url) ? "&" : "?";
    //             url += _symbol + _arr.join("&")
    //         }
    //         xhr.open("GET", url);
    //         xhr.send(null);
    //         xhr.onreadystatechange = function () {
    //             if (xhr.readyState === 4 && xhr.status === 200)
    //                 resolve(xhr.responseText);
    //         }
    //     })
    // }
    // 加载左边栏菜单数据
    var xhr = new XMLHttpRequest();
    xhr.open("get", "http://localhost:8000/home");
    xhr.onload = function () {
        var res = JSON.parse(xhr.response)
        render(res)
    }
    xhr.send();
    // 渲染左边栏菜单
    function render(res) {
        var leftItem = res.data;

        var list1goodsHtml = "";
        var count = 0;
        leftItem.forEach(ele => {
            count++;
            list1goodsHtml +=
                `
                <li>
                    <span>${ele.classifyName}</span>
                    <ul class="list1_miss">
                `;
            var goodslist = ele.list;
            // console.log(ele.classifyName)
            goodslist.forEach(element => {
                // console.log(element.classifyName)
                list1goodsHtml +=
                    `
                    <li>
                        <a href="">${element.classifyName}</a>
                    </li>
                `;
            });
            list1goodsHtml +=
                `   </ul>
                 </li>
                `
        });

        // 放入html中
        $(".list1_main_goodslist").append(list1goodsHtml);
        // 点击隐藏二级菜单
        $(".list1_main_goodslist li span").click(function () {
            $(this).siblings("ul").toggleClass(" list1_miss")
        })
    }
    // $.ajax({
    //     url: "http://localhost:9999/json/list/list1.json",//json文件位置
    //     type: "GET",//请求方式为get
    //     dataType: "json", //返回数据格式为json
    //     success: function (data) {
    //         $(".list1_main_goods").hover(
    //             function(e){
    //                var e=e||window.event;
    //                var target = e.target || e.srcElement;
    //                if(target.nodeName.toLowerCase() == 'li'){
    //                    target.style.background = "red";
    //                }
    //             })
    //     }
    // })
    $.ajax({
        url: "http://localhost:9999/json/list/list1.json",//json文件位置
        type: "GET",//请求方式为get
        dataType: "json", //返回数据格式为json
        success: function (data) {//请求成功完成后要执行的方法 
            var goodsHTML = "";
            var _number = data.length;
            var _count=Math.ceil(_number/3)*635;
            $(".list1_main_goods").css({
                height : _count+"px"
            });
            $(".list1_main_top strong b").text(_number)
            data.forEach(ele => {
                goodsHTML +=
                    `
                <li>
                    <a href="###">
                        <img src="http://www.only.cn${ele.gscMaincolPath}">
                    </a>
                    <p class="list1_goodsmes">
                        <span>${ele.goodsName}</span>
                        <i>${ele.discount*10}.0折</i>
                    </p>
                    <p class="list1_goodsprise">
                        <span class="nowprice">￥${ele.discountPrice}</span>
                        <span class="lastprice">￥${ele.originalPrice}</span>
                    </p>
                    <span>
                        快速购买
                    </span>
                </li>
                `;
            });
            $(".list1_main_goods").append(goodsHTML);
             $(".list1_main_goods li a img").hover(function(){
                 console.log($(this))
                 $(this).stop().animate({
                     height : "560px",
                     width : "350px"
                 },600)
             },function(){
                $(this).stop().animate({
                     height : "535px",
                     width : "335px"
                 },600)
             })
        }
    })

    // $(".list1_main_goods").click(function(e){
    //     var e = e|| window.event;
    //     var target = e.target || e.srcElement;
    //     if(target.nodeName.toLowerCase() == 'li'){
    //         alert()
    //     }
    // })
</script>

</html>