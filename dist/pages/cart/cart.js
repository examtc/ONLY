"use strict";require(["../../static/conf/config.js"],function(){require(["jquery","sw"],function(c,i){var t=localStorage.getItem("logined");null!=t?c(".index_login a").hide().siblings("i").text("欢迎您"+t).siblings("span").show():c(".index_login span").hide(),c(".index_login span").click(function(){c(this).hide().siblings("a").show().siblings("i").text(""),localStorage.removeItem("logined")}),c(".index_search i").click(function(){c(this).hide().siblings("span").hide().siblings("div").css({display:"inline-block"})}),c(".index_search div label").click(function(){c(this).parent("div").css({display:"none"}).siblings("span").show().siblings("i").show()});var e=JSON.parse(localStorage.getItem("cart"));console.log(e),c(".cart_main_title p").children("i").text(e.length);var n="";e.forEach(function(i){n+='\n                <li>\n                    <div class="cart_goodspic">\n                        <input type="checkbox">\n                        <img src="https://www.only.cn/'.concat(i.pic,'">\n                    </div>\n                    <p class="cart_goodsname">').concat(i.des,'</p>\n                    <div class="cart_color">\n                        ').concat(i.color,'\n                    </div>\n                    <div class="cart_size">\n                        ').concat(i.size,'\n                    </div>\n                    <div class="cart_count">\n                        <div>\n                            <b>').concat(i.count,'</b>\n                            <div>\n                                <label class="count_add">+</label>\n                                <label class="count_low">-</label>\n                            </div>\n                        </div>\n                        <p>库存:<strong>').concat(i.sell,'</strong>件</p>\n                    </div>\n                    <div class="cart_oneprice">\n                        ￥<i>').concat(i.priseNow,'</i>\n                    </div>\n                    <p class="cart_allprice">\n                        ￥<i>').concat(i.priseNow*i.count,'</i>\n                    </p>\n                    <div class="delete_cart">\n                        从购物车中删除\n                    </div>\n                </li>\n            ')}),c(".cart_main_body_goodsItem ul").append(n),c(".delete_cart").click(function(){var i=c(this).parent("li").index();c(this).parent("li").remove(),e.splice(i,1),c(".specialCart>i").text(parseInt(c(".specialCart>i").text())-1),c(".smCartMessage>div p i").text(parseInt(c(".smCartMessage>div p i").text())+1),c(".smCartMessage ul").children("li").eq(i).remove(),c(".cart_main_title>p").children("i").text(parseInt(c(".cart_main_title>p").children("i").text())-1),localStorage.setItem("cart",JSON.stringify(e))}),c(".cart_main_body_footer").children("button").click(function(){c(this).parent().siblings("ul").children("li").remove(),c(".specialCart>i").text(0),c(".smCartMessage>div p i").text(0),c(".smCartMessage ul li").remove(),c(".cart_main_title>p").children("i").text(0),localStorage.removeItem("cart")}),c(".count_add").click(function(){var i=c(this).parent("div").siblings("b").text();if(i<parseInt(c(this).parent("div").parent("div").siblings("p").children("strong").text())){i++,c(this).parent("div").siblings("b").text(i);var t=c(this).parent("div").parent("div").parent("div").siblings(".cart_oneprice").children("i").text();c(this).parent("div").parent("div").parent("div").siblings(".cart_allprice").children("i").text((t*i).toFixed(1))}for(var e=c(".cart_main_body_goodsItem").find(":checked"),n=0,a=0;a<e.length;a++)n+=parseFloat(c(e[a]).parent("div").siblings(".cart_allprice").children("i").text());c(".cart_last_all").children("i").text(n)}),c(".count_low").click(function(){var i=c(this).parent("div").siblings("b").text();if(1<i){i--,c(this).parent("div").siblings("b").text(i);var t=c(this).parent("div").parent("div").parent("div").siblings(".cart_oneprice").children("i").text();c(this).parent("div").parent("div").parent("div").siblings(".cart_allprice").children("i").text((t*i).toFixed(1))}for(var e=c(".cart_main_body_goodsItem").find(":checked"),n=0,a=0;a<e.length;a++)n+=parseFloat(c(e[a]).parent("div").siblings(".cart_allprice").children("i").text());c(".cart_last_all").children("i").text(n)}),c("._allcheck").children("input").change(function(){c(this).is(":checked")?c(".cart_main_body_goodsItem ul").children("li").find("input").prop("checked",!0):c(".cart_main_body_goodsItem ul").children("li").find("input").prop("checked",!1)}),c(".cart_main_body").find("input").change(function(){for(var i=c(".cart_main_body_goodsItem").find(":checked"),t=0,e=0;e<i.length;e++)t+=parseFloat(c(i[e]).parent("div").siblings(".cart_allprice").children("i").text());c(".cart_last_all").children("i").text(t)});e=JSON.parse(localStorage.getItem("cart"));console.log(e);var a="";e.forEach(function(i){a+='\n     <li>\n         <img src="https://www.only.cn'.concat(i.pic,'">\n         <div>\n             <p class="smCartMessage_des">\n                 <label>').concat(i.des,"</label>\n                 <i>￥").concat(i.priseNow,"</i> <b>x").concat(i.count,'</b>\n             </p>\n             <p class="smCartMessage_color">\n                 颜色：<i>').concat(i.color,'</i>\n             </p>\n             <p class="smCartMessage_size">\n                 尺码：<i>').concat(i.size,"</i>\n             </p>\n             <button>删除</button>\n         </div>\n     </li>\n     ")}),c(".smCartMessage ul").prepend(a),c(".smCartMessage>div p i").text(e.length),c(".smCartMessage ul li button").click(function(){var i=c(this).parent("div").parent("li").index();c(this).parent("div").parent("li").remove(),e.splice(i,1),c(".smCartMessage>div p i").text(parseInt(c(".smCartMessage>div p i").text())-1),c(".specialCart>i").text(parseInt(c(".specialCart>i").text())-1),c(".cart_main_body_goodsItem ul li").eq(i).remove(),localStorage.setItem("cart",JSON.stringify(e))});var s=JSON.parse(localStorage.getItem("cart")).length;c(".specialCart>i").text(s)})});