"use strict";require(["../../static/conf/config.js"],function(){require(["jquery","vali"],function(c){c(".regist_submit").click(function(){console.log(c(this)),c(".regist_phone input").validate({rules:{require:!0,minlength:11}})});var s=/^[1][3,4,5,7,8][0-9]{9}$/,i=/^\d{4}$/,t=/^[A-Za-z0-9\_\*\&\%\$\#]{6,20}$/,n=null,e=null,a=null,l=null,o=null,r=null,p=null,g=null;c(".regist_phone input").blur(function(){p=c(".regist_phone input").val().replace(/(^\s*)|(\s*$)/g,""),e=""==p?(c(this).css({borderColor:"#F64A4A"}),c(this).siblings(".faile").css({opacity:"1"}),c(this).siblings(".success").css({opacity:"0"}),c(this).siblings("p").text("手机号不能为空"),!1):s.test(p)?(c(this).siblings(".faile").css({opacity:"0"}),c(this).siblings(".success").css({opacity:"1"}),!0):(c(this).siblings("p").text("请输入正确的手机号码"),c(this).css({borderColor:"#F64A4A"}),c(this).siblings(".faile").css({opacity:"1"}),c(this).siblings(".success").css({opacity:"0"}),!1)}),c(".regist_phone input").focus(function(){c(this).siblings("p").text(""),c(this).css({borderColor:"#686666"}),c(this).siblings(".faile").css({opacity:"0"})}),c(".regist_code a").click(function(){var s=parseInt(9*Math.random()+1),i=parseInt(10*Math.random()),t=parseInt(10*Math.random()),e=parseInt(10*Math.random());n=parseInt("".concat(s).concat(i).concat(t).concat(e)),c(this).text(n)}),c(".regist_code input").blur(function(){var s=c(".regist_code input").val().replace(/(^\s*)|(\s*$)/g,"");i.test(s)||(c(this).siblings("p").text("请输入4位验证码"),c(this).css({borderColor:"#F64A4A"}),c(this).siblings(".faile").css({opacity:"1"}),c(this).siblings(".success").css({opacity:"0"}),a=!1),s!==n&&(c(this).siblings(".faile").css({opacity:"1"}),c(this).siblings(".success").css({opacity:"0"}),c(this).siblings("p").text("验证码错误"),a=!1),s==n&&(c(this).siblings(".faile").css({opacity:"0"}),c(this).siblings(".success").css({opacity:"1"}),c(this).siblings("p").text(""),a=!0)}),c(".regist_code input").focus(function(){c(this).siblings("p").text(""),c(this).css({borderColor:"#686666"}),c(this).siblings(".faile").css({opacity:"0"})}),c(".regist_password input").blur(function(){var s=0;""==(g=c(".regist_password input").val().replace(/(^\s*)|(\s*$)/g,""))&&(c(this).css({borderColor:"#F64A4A"}),c(this).siblings(".faile").css({opacity:"1"}),c(this).siblings(".success").css({opacity:"0"}),c(this).siblings(".faileTip").text("密码不能为空")),t.test(g)?(g.match(/[\d]+/g)&&(s+=1),g.match(/[a-zA-Z]+/g)&&(s+=1),g.match(/[\#\$\%\*]+/g)&&(s+=1),1==s&&(c(this).css({borderColor:"#F64A4A"}),c(this).siblings(".faile").css({opacity:"1"}),c(this).siblings(".success").css({opacity:"0"}),c(this).siblings(".faileTip").text("密码过于简单，有被盗风险，建议您更改为复杂密码"),l=!1),2==s&&(c(this).css({borderColor:"#686666"}),c(this).siblings(".faile").css({opacity:"0"}),c(this).siblings(".success").css({opacity:"1"}),c(this).siblings(".successTip").text("密码安全强度适中"),l=!0),2<s&&(c(this).css({borderColor:"#686666"}),c(this).siblings(".faile").css({opacity:"0"}),c(this).siblings(".success").css({opacity:"1"}),c(this).siblings(".successTip").text("你的密码很安全"),l=!0)):(c(this).css({borderColor:"#F64A4A"}),c(this).siblings(".faile").css({opacity:"1"}),c(this).siblings(".success").css({opacity:"0"}),c(this).siblings(".faileTip").text("请输入6-20位密码"),l=!1)}),c(".regist_password input").focus(function(){c(this).siblings("p").text(""),c(this).css({borderColor:"#686666"}),c(this).siblings(".faile").css({opacity:"0"})}),c(".regist_password_again input").blur(function(){var s=c(".regist_password_again input").val().replace(/(^\s*)|(\s*$)/g,"");""!=s&&null!=s||(c(this).css({borderColor:"#F64A4A"}),c(this).siblings(".faile").css({opacity:"1"}),c(this).siblings(".success").css({opacity:"0"}),c(this).siblings("p").text("请输入确认密码"),o=!1),s!==c(".regist_password input").val()&&(c(this).css({borderColor:"#F64A4A"}),c(this).siblings(".faile").css({opacity:"1"}),c(this).siblings(".success").css({opacity:"0"}),c(this).siblings("p").text("两次输入的密码不一致，请重试"),o=!1),s==c(".regist_password input").val()&&""!==s&&(c(this).siblings(".faile").css({opacity:"0"}),c(this).siblings(".success").css({opacity:"1"}),o=!0)}),c(".regist_password_again input").focus(function(){c(this).siblings("p").text(""),c(this).css({borderColor:"#686666"}),c(this).siblings(".faile").css({opacity:"0"}),c(this).siblings(".success").css({opacity:"0"})}),c(".regist_submit").click(function(){if(!c(".regist_server input").is(":checked"))return alert("请勾选"),!1;r=!0;var s=JSON.parse(localStorage.getItem("userinfo")),i=[];for(var t in s)i.push(s[t]);1==e&&1==a&&1==l&&1==o&&1==r?(i.push({username:p,password:g}),localStorage.setItem("userinfo",JSON.stringify(i)),setTimeout(function(){alert("注册成功，即将为您跳转登录页面！ "),window.location="../login/login.html"})):alert("请按照提示正确填写注册信息")});var h=localStorage.getItem("logined");null!=h?c(".index_login a").hide().siblings("i").text("欢迎您"+h).siblings("span").show():c(".index_login span").hide(),c(".index_login span").click(function(){c(this).hide().siblings("a").show().siblings("i").text(""),localStorage.removeItem("logined")}),c(".index_search i").click(function(){c(this).hide().siblings("span").hide().siblings("div").css({display:"inline-block"})}),c(".index_search div label").click(function(){c(this).parent("div").css({display:"none"}).siblings("span").show().siblings("i").show()});var u=JSON.parse(localStorage.getItem("cart"));console.log(u);var b="";u.forEach(function(s){b+='\n                <li>\n                    <img src="https://www.only.cn'.concat(s.pic,'">\n                    <div>\n                        <p class="smCartMessage_des">\n                            <label>').concat(s.des,"</label>\n                            <i>￥").concat(s.priseNow,"</i> <b>x").concat(s.count,'</b>\n                        </p>\n                        <p class="smCartMessage_color">\n                            颜色：<i>').concat(s.color,'</i>\n                        </p>\n                        <p class="smCartMessage_size">\n                            尺码：<i>').concat(s.size,"</i>\n                        </p>\n                        <button>删除</button>\n                    </div>\n                </li>\n                ")}),c(".smCartMessage ul").prepend(b),c(".smCartMessage>div p i").text(u.length),c(".smCartMessage ul li button").click(function(){var s=c(this).parent("div").parent("li").index();c(this).parent("div").parent("li").remove(),u.splice(s,1),c(".smCartMessage>div p i").text(parseInt(c(".smCartMessage>div p i").text())-1),c(".specialCart>i").text(parseInt(c(".specialCart>i").text())-1),localStorage.setItem("cart",JSON.stringify(u))});var d=JSON.parse(localStorage.getItem("cart")).length;c(".specialCart>i").text(d)})});