"use strict";require(["../../static/conf/config.js"],function(){require(["jquery","sw"],function(u,i){var n=localStorage.getItem("logined");null!=n?u(".index_login a").hide().siblings("i").text("欢迎您"+n).siblings("span").show():u(".index_login span").hide(),u(".index_login span").click(function(){u(this).hide().siblings("a").show().siblings("i").text(""),localStorage.removeItem("logined")}),u(".index_search i").click(function(){u(this).hide().siblings("span").hide().siblings("div").css({display:"inline-block"})}),u(".index_search div label").click(function(){u(this).parent("div").css({display:"none"}).siblings("span").show().siblings("i").show()}),u(".magnifier_big").mouseover(function(){u(".magnifie_move").show(),u(".magnifier_showpic").show()}),u(".magnifier_big").mouseout(function(){u(".magnifie_move").hide(),u(".magnifier_showpic").hide()}),u(".magnifier_big").mousemove(function(i){var n=i.pageX-u(".magnifier_big").offset().left-u(".magnifie_move").width()/2,t=i.pageY-u(".magnifier_big").offset().top-u(".magnifie_move").height()/2;n<0&&(n=0),n>u(this).width()-u(".magnifie_move").width()&&(n=u(this).width()-u(".magnifie_move").width()),t<0&&(t=0),t>u(this).height()-u(".magnifie_move").height()&&(t=u(this).height()-u(".magnifie_move").height()),u(".magnifie_move").css({left:n,top:t});var s=n/(u(".magnifier_big").width()-u(".magnifie_move").width()),o=t/(u(".magnifier_big").height()-u(".magnifie_move").height());u(".magnifier_showpic img").css({left:-s*(u(".magnifier_showpic img").width()-u(".magnifier_showpic").width()),top:-o*(u(".magnifier_showpic img").height()-u(".magnifier_showpic").height())})}),u(".goodsSizeList ul li").click(function(){u(this).addClass("chooseLogo").siblings().removeClass("chooseLogo")});var t=new XMLHttpRequest;t.open("get","http://localhost:8000/home"),t.onload=function(){!function(i){var n=i.data,t="";n.forEach(function(i){0,t+="\n                <li>\n                    <span>".concat(i.classifyName,"</span>\n                    <ul>\n                "),i.list.forEach(function(i){t+='\n                    <li>\n                        <a href="?'.concat(i.classifyId,'">').concat(i.classifyName,"</a>\n                    </li>\n                ")}),t+="   </ul>\n                 </li>\n                "}),u(".detail_goodslist").append(t),u(".detail_goodslist li span").click(function(){u(this).siblings("ul").toggleClass(" detail__ListHide")})}(JSON.parse(t.response))},t.send(),u.ajax({url:"http://localhost:8000/detail1",type:"GET",dataType:"json",success:function(i){var n=i.data,t="";n.forEach(function(i){t+='\n                    <li>\n                        <a href="?design='.concat(i.colorCode,'"><img src="https://www.only.cn').concat(i.picurls[0],'"></a>\n                        <span>￥').concat(i.price,"</span>\n                    </li>\n                    ")}),u(".detail_body_right ul").append(t)}}),u.ajax({url:"http://localhost:8000/detail2".concat(window.location.search),type:"GET",dataType:"json",success:function(h){console.log(h.data);var m=h.data.color,i="",n="",t="",s="",o="",e="",a="";u(".detail_main_title span").text("首页/".concat(h.data.goodsName)),i+='\n                <li><img src="https://www.only.cn'.concat(m[0].picurls[0],'"></li>\n                <li><img src="https://www.only.cn').concat(m[0].picurls[1],'"></li>\n                <li><img src="https://www.only.cn').concat(m[0].picurls[2],'"></li>\n                <li><img src="https://www.only.cn').concat(m[0].picurls[3],'"></li>\n                '),u(".magnifier_sm").append(i),u(".magnifier_sm li").click(function(){u(this).addClass("chooseItem").css({height:"170px"}).siblings().removeClass("chooseItem").css({height:"172px"});var i=u(this).index();0==i&&u(".magnifier_big img").attr("src","https://www.only.cn".concat(m[0].picurls[0])),1==i&&u(".magnifier_big img").attr("src","https://www.only.cn".concat(m[0].picurls[1])),2==i&&u(".magnifier_big img").attr("src","https://www.only.cn".concat(m[0].picurls[2])),3==i&&u(".magnifier_big img").attr("src","https://www.only.cn".concat(m[0].picurls[3]))}),n+='\n                        <span class="goods_price">价格</span>\n                        <span class="goods_nowPrice">￥'.concat(m[0].price,'</span>\n                        <span class="goods_lastPrice">吊牌价 ￥ ').concat(m[0].originalPrice,"</span>\n                        <i>促销</i>\n                        "),u(".priceline").append(n),t+="\n                        <h3>".concat(h.data.goodsName,"</h3>\n                        <p>产品编号:").concat(m[0].colorCode,"</p>"),u(".detail_goodsInfo").prepend(t),s+='\n                        <img src="https://www.only.cn'.concat(m[0].picurls[0],'">\n                        '),u(".magnifier_big").prepend(s),u(".magnifier_showpic").append(s),h.data.color.forEach(function(i){o+='\n                            <li>\n                                <img src="https://www.only.cn'.concat(i.picurls[1],'" alt="').concat(i.colorAlias,'">\n                                <span><img src="../../img/detail/rightlogo.png"></span>\n                            </li>\n                            ')}),u(".goodsColor ul").append(o);var c=parseInt(14*Math.random()+2);u(".goodsColor ul li").click(function(){u(this).addClass("chooseLogo").children("span").show().parent().siblings().removeClass("chooseLogo").children("span").hide();var n=u(this).index();u(".goodsCount p i").text(c+3*n),u(".goodsCount div>i").text(1),e+='\n                    <li><img src="https://www.only.cn'.concat(m[n].picurls[0],'"></li>\n                    <li><img src="https://www.only.cn').concat(m[n].picurls[1],'"></li>\n                    <li><img src="https://www.only.cn').concat(m[n].picurls[2],'"></li>\n                    <li><img src="https://www.only.cn').concat(m[n].picurls[3],'"></li>\n                    '),u(".magnifier_sm").empty(),u(".magnifier_sm").append(e),u(".magnifier_big>img").attr("src","https://www.only.cn".concat(m[n].picurls[0])),u(".magnifier_showpic>img").attr("src","https://www.only.cn".concat(m[n].picurls[0])),e="",u(".magnifier_sm li").click(function(){u(this).addClass("chooseItem").css({height:"170px"}).siblings().removeClass("chooseItem").css({height:"172px"});var i=u(this).index();0==i&&u(".magnifier_big img").attr("src","https://www.only.cn".concat(m[n].picurls[0])),1==i&&u(".magnifier_big img").attr("src","https://www.only.cn".concat(m[n].picurls[1])),2==i&&u(".magnifier_big img").attr("src","https://www.only.cn".concat(m[n].picurls[2])),3==i&&u(".magnifier_big img").attr("src","https://www.only.cn".concat(m[n].picurls[3]))})}),u(".goodsCount span").first().click(function(){var i=u(".goodsCount p i").text(),n=parseInt(u(".goodsCount div>i").text());n<i&&n++,u(".goodsCount div>i").text(n)}).siblings().click(function(){u(".goodsCount p i").text();var i=parseInt(u(".goodsCount div>i").text());1<i&&i--,u(".goodsCount div>i").text(i)}),m.forEach(function(i){for(var n=0;n<i.picurls.length-1;n++)a+='\n                        <div>\n                            <img src="https://www.only.cn'.concat(i.picurls[n],'">\n                        </div>    \n                    ')}),a+='\n                    <div class="detail_body_middle_footerpic">\n                        <img src="../../img/detail/detail26.jpg">\n                    </div>  \n                ',u(".detail_body_middle").append(a),console.log(u(".goodsColor ul").children(".chooseLogo").length),u(".join_cart").click(function(){if(0==u(".goodsColor ul").children(".chooseLogo").length)alert("请选择商品颜色");else{var i=u(".goodsSizeList ul").children(".chooseLogo").text();console.log("尺寸=========",i);var n=u(".goodsColor ul").children(".chooseLogo").children("img").attr("alt");console.log("颜色=========",n);var t=window.location.search.replace(/[^0-9]/gi,"").substring(0,9);console.log("ID=========",t);var s=u(".goodsCount").children("div").children("i").text();console.log("数量=========",s);var o=u(".goodsColor ul").children(".chooseLogo").index(),e=h.data.goodsName;console.log("描述=========",e);var a=m[o].picurls[0];console.log("链接=========",a);var c=u(".goodsCount").children("p").children("i").text(),l=m[o].price,r=JSON.parse(localStorage.getItem("cart")),g=[];for(var p in r)g.push(r[p]);g.push({size:i,color:n,id:t,count:s,index:o,des:e,pic:a,priseNow:l,sell:c}),localStorage.setItem("cart",JSON.stringify(g));var d="";d+='\n                <li>\n                    <img src="https://www.only.cn'.concat(a,'">\n                    <div>\n                        <p class="smCartMessage_des">\n                            <label>').concat(e,"</label>\n                            <i>￥").concat(l,"</i> <b>x").concat(s,'</b>\n                        </p>\n                        <p class="smCartMessage_color">\n                            颜色：<i>').concat(n,'</i>\n                        </p>\n                        <p class="smCartMessage_size">\n                            尺码：<i>').concat(i,"</i>\n                        </p>\n                        <button>删除</button>\n                    </div>\n                </li>\n                "),u(".smCartMessage ul").append(d),u(".smCartMessage_size").siblings("button").click(function(){var i=JSON.parse(localStorage.getItem("cart")),n=u(this).parent("div").parent("li").index();u(this).parent("div").parent("li").remove(),i.splice(n,1),u(".smCartMessage>div p i").text(parseInt(u(".smCartMessage>div p i").text())-1),u(".specialCart>i").text(parseInt(u(".specialCart>i").text())-1),localStorage.setItem("cart",JSON.stringify(i))}),u(".specialCart>i").text(parseInt(u(".specialCart>i").text())+1),u(".smCartMessage>div p i").text(parseInt(u(".smCartMessage>div p i").text())+1),u(".addsuccess").show()}}),u(".addsuccess").children("p").children("span").click(function(){u(".addsuccess").hide()});var l=JSON.parse(localStorage.getItem("cart"));console.log(l);var r="";l.forEach(function(i){r+='\n                    <li>\n                        <img src="https://www.only.cn'.concat(i.pic,'">\n                        <div>\n                            <p class="smCartMessage_des">\n                                <label>').concat(i.des,"</label>\n                                <i>￥").concat(i.priseNow,"</i> <b>x").concat(i.count,'</b>\n                            </p>\n                            <p class="smCartMessage_color">\n                                颜色：<i>').concat(i.color,'</i>\n                            </p>\n                            <p class="smCartMessage_size">\n                                尺码：<i>').concat(i.size,"</i>\n                            </p>\n                            <button>删除</button>\n                        </div>\n                    </li>\n                ")}),u(".smCartMessage ul").append(r),u(".smCartMessage>div p i").text(l.length),u(".smCartMessage ul li button").click(function(){var i=u(this).parent("div").parent("li").index();u(this).parent("div").parent("li").remove(),l.splice(i,1),u(".smCartMessage>div p i").text(parseInt(u(".smCartMessage>div p i").text())-1),u(".specialCart>i").text(parseInt(u(".specialCart>i").text())-1),localStorage.setItem("cart",JSON.stringify(l))});var g=JSON.parse(localStorage.getItem("cart")).length;u(".specialCart>i").text(g)}})})});