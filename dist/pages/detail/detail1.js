"use strict";require(["../../static/conf/config.js"],function(){require(["jquery","sw"],function(m,i){var n=localStorage.getItem("logined");null!=n?m(".index_login a").hide().siblings("i").text("欢迎您"+n).siblings("span").show():m(".index_login span").hide(),m(".index_login span").click(function(){m(this).hide().siblings("a").show().siblings("i").text(""),localStorage.removeItem("logined")}),m(".index_search i").click(function(){m(this).hide().siblings("span").hide().siblings("div").css({display:"inline-block"})}),m(".index_search div label").click(function(){m(this).parent("div").css({display:"none"}).siblings("span").show().siblings("i").show()}),m(".magnifier_big").mouseover(function(){m(".magnifie_move").show(),m(".magnifier_showpic").show()}),m(".magnifier_big").mouseout(function(){m(".magnifie_move").hide(),m(".magnifier_showpic").hide()}),m(".magnifier_big").mousemove(function(i){var n=i.pageX-m(".magnifier_big").offset().left-m(".magnifie_move").width()/2,s=i.pageY-m(".magnifier_big").offset().top-m(".magnifie_move").height()/2;n<0&&(n=0),n>m(this).width()-m(".magnifie_move").width()&&(n=m(this).width()-m(".magnifie_move").width()),s<0&&(s=0),s>m(this).height()-m(".magnifie_move").height()&&(s=m(this).height()-m(".magnifie_move").height()),m(".magnifie_move").css({left:n,top:s});var t=n/(m(".magnifier_big").width()-m(".magnifie_move").width()),o=s/(m(".magnifier_big").height()-m(".magnifie_move").height());m(".magnifier_showpic img").css({left:-t*(m(".magnifier_showpic img").width()-m(".magnifier_showpic").width()),top:-o*(m(".magnifier_showpic img").height()-m(".magnifier_showpic").height())})}),m(".goodsSizeList ul li").click(function(){m(this).addClass("chooseLogo").siblings().removeClass("chooseLogo")});var s=new XMLHttpRequest;s.open("get","http://localhost:8000/home"),s.onload=function(){!function(i){var n=i.data,s="";n.forEach(function(i){0,s+="\n                <li>\n                    <span>".concat(i.classifyName,"</span>\n                    <ul>\n                "),i.list.forEach(function(i){s+='\n                    <li>\n                        <a href="?'.concat(i.classifyId,'">').concat(i.classifyName,"</a>\n                    </li>\n                ")}),s+="   </ul>\n                 </li>\n                "}),m(".detail_goodslist").append(s),m(".detail_goodslist li span").click(function(){m(this).siblings("ul").toggleClass(" detail__ListHide")})}(JSON.parse(s.response))},s.send(),m.ajax({url:"http://localhost:8000/detail1",type:"GET",dataType:"json",success:function(i){var n=i.data,s="";n.forEach(function(i){s+='\n                    <li>\n                        <a href="?design='.concat(i.colorCode,'"><img src="https://www.only.cn').concat(i.picurls[0],'"></a>\n                        <span>￥').concat(i.price,"</span>\n                    </li>\n                    ")}),m(".detail_body_right ul").append(s)}}),m.ajax({url:"http://localhost:8000/detail2".concat(window.location.search),type:"GET",dataType:"json",success:function(d){console.log(d.data);var h=d.data.color,i="",n="",s="",t="",o="",e="",c="";m(".detail_main_title span").text("首页/".concat(d.data.goodsName)),i+='\n                <li><img src="https://www.only.cn'.concat(h[0].picurls[0],'"></li>\n                <li><img src="https://www.only.cn').concat(h[0].picurls[1],'"></li>\n                <li><img src="https://www.only.cn').concat(h[0].picurls[2],'"></li>\n                <li><img src="https://www.only.cn').concat(h[0].picurls[3],'"></li>\n                '),m(".magnifier_sm").append(i),m(".magnifier_sm li").click(function(){m(this).addClass("chooseItem").css({height:"170px"}).siblings().removeClass("chooseItem").css({height:"172px"});var i=m(this).index();0==i&&m(".magnifier_big img").attr("src","https://www.only.cn".concat(h[0].picurls[0])),1==i&&m(".magnifier_big img").attr("src","https://www.only.cn".concat(h[0].picurls[1])),2==i&&m(".magnifier_big img").attr("src","https://www.only.cn".concat(h[0].picurls[2])),3==i&&m(".magnifier_big img").attr("src","https://www.only.cn".concat(h[0].picurls[3]))}),n+='\n                        <span class="goods_price">价格</span>\n                        <span class="goods_nowPrice">￥'.concat(h[0].price,'</span>\n                        <span class="goods_lastPrice">吊牌价 ￥ ').concat(h[0].originalPrice,"</span>\n                        <i>促销</i>\n                        "),m(".priceline").append(n),s+="\n                        <h3>".concat(d.data.goodsName,"</h3>\n                        <p>产品编号:").concat(h[0].colorCode,"</p>"),m(".detail_goodsInfo").prepend(s),t+='\n                        <img src="https://www.only.cn'.concat(h[0].picurls[0],'">\n                        '),m(".magnifier_big").prepend(t),m(".magnifier_showpic").append(t),d.data.color.forEach(function(i){o+='\n                            <li>\n                                <img src="https://www.only.cn'.concat(i.picurls[1],'" alt="').concat(i.colorAlias,'">\n                                <span><img src="../../img/detail/rightlogo.png"></span>\n                            </li>\n                            ')}),m(".goodsColor ul").append(o);var a=parseInt(14*Math.random()+2);m(".goodsColor ul li").click(function(){m(this).addClass("chooseLogo").children("span").show().parent().siblings().removeClass("chooseLogo").children("span").hide();var n=m(this).index();m(".goodsCount p i").text(a+3*n);var s=m(".goodsCount p i").text();m(".goodsCount span").first().click(function(){var i=parseInt(m(".goodsCount div>i").text());i<s&&i++,m(".goodsCount div>i").text(i)}).siblings().click(function(){var i=parseInt(m(".goodsCount div>i").text());1<i&&i--,m(".goodsCount div>i").text(i)}),e+='\n                    <li><img src="https://www.only.cn'.concat(h[n].picurls[0],'"></li>\n                    <li><img src="https://www.only.cn').concat(h[n].picurls[1],'"></li>\n                    <li><img src="https://www.only.cn').concat(h[n].picurls[2],'"></li>\n                    <li><img src="https://www.only.cn').concat(h[n].picurls[3],'"></li>\n                    '),m(".magnifier_sm").empty(),m(".magnifier_sm").append(e),m(".magnifier_big>img").attr("src","https://www.only.cn".concat(h[n].picurls[0])),m(".magnifier_showpic>img").attr("src","https://www.only.cn".concat(h[n].picurls[0])),e="",m(".magnifier_sm li").click(function(){m(this).addClass("chooseItem").css({height:"170px"}).siblings().removeClass("chooseItem").css({height:"172px"});var i=m(this).index();0==i&&m(".magnifier_big img").attr("src","https://www.only.cn".concat(h[n].picurls[0])),1==i&&m(".magnifier_big img").attr("src","https://www.only.cn".concat(h[n].picurls[1])),2==i&&m(".magnifier_big img").attr("src","https://www.only.cn".concat(h[n].picurls[2])),3==i&&m(".magnifier_big img").attr("src","https://www.only.cn".concat(h[n].picurls[3]))})}),h.forEach(function(i){for(var n=0;n<i.picurls.length-1;n++)c+='\n                        <div>\n                            <img src="https://www.only.cn'.concat(i.picurls[n],'">\n                        </div>    \n                    ')}),c+='\n                    <div class="detail_body_middle_footerpic">\n                        <img src="../../img/detail/detail26.jpg">\n                    </div>  \n                ',m(".detail_body_middle").append(c),console.log(m(".goodsColor ul").children(".chooseLogo").length),m(".join_cart").click(function(){if(0==m(".goodsColor ul").children(".chooseLogo").length)alert("请选择商品颜色");else{var i=m(".goodsSizeList ul").children(".chooseLogo").text();console.log("尺寸=========",i);var n=m(".goodsColor ul").children(".chooseLogo").children("img").attr("alt");console.log("颜色=========",n);var s=window.location.search.replace(/[^0-9]/gi,"").substring(0,9);console.log("ID=========",s);var t=m(".goodsCount").children("div").children("i").text();console.log("数量=========",t);var o=m(".goodsColor ul").children(".chooseLogo").index(),e=d.data.goodsName;console.log("描述=========",e);var c=h[o].picurls[0];console.log("链接=========",c);var a=m(".goodsCount").children("p").children("i").text(),l=h[o].price,r=JSON.parse(localStorage.getItem("cart")),g=[];for(var p in r)g.push(r[p]);g.push({size:i,color:n,id:s,count:t,index:o,des:e,pic:c,priseNow:l,sell:a}),localStorage.setItem("cart",JSON.stringify(g)),m(".specialCart>i").text(parseInt(m(".specialCart>i").text())+1),m(".smCartMessage>div p i").text(parseInt(m(".smCartMessage>div p i").text())+1),m(".addsuccess").show()}}),m(".addsuccess").children("p").children("span").click(function(){m(".addsuccess").hide()});var l=JSON.parse(localStorage.getItem("cart"));console.log(l);var r="";l.forEach(function(i){r+='\n        <li>\n            <img src="https://www.only.cn'.concat(i.pic,'">\n            <div>\n                <p class="smCartMessage_des">\n                    <label>').concat(i.des,"</label>\n                    <i>￥").concat(i.priseNow,"</i> <b>x").concat(i.count,'</b>\n                </p>\n                <p class="smCartMessage_color">\n                    颜色：<i>').concat(i.color,'</i>\n                </p>\n                <p class="smCartMessage_size">\n                    尺码：<i>').concat(i.size,"</i>\n                </p>\n                <button>删除</button>\n            </div>\n        </li>\n        ")}),m(".smCartMessage ul").append(r),m(".smCartMessage>div p i").text(l.length),m(".smCartMessage ul li button").click(function(){var i=m(this).parent("div").parent("li").index();m(this).parent("div").parent("li").remove(),l.splice(i,1),m(".smCartMessage>div p i").text(parseInt(m(".smCartMessage>div p i").text())-1),m(".specialCart>i").text(parseInt(m(".specialCart>i").text())-1),localStorage.setItem("cart",JSON.stringify(l))});var g=JSON.parse(localStorage.getItem("cart")).length;m(".specialCart>i").text(g)}})})});