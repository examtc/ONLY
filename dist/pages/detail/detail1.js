"use strict";require(["../../static/conf/config.js"],function(){require(["jquery","sw"],function(w,i){var n=localStorage.getItem("logined");null!=n?w(".index_login a").hide().siblings("i").text("欢迎您"+n).siblings("span").show():w(".index_login span").hide(),w(".index_login span").click(function(){w(this).hide().siblings("a").show().siblings("i").text(""),localStorage.removeItem("logined")}),w(".index_search i").click(function(){w(this).hide().siblings("span").hide().siblings("div").css({display:"inline-block"})}),w(".index_search div label").click(function(){w(this).parent("div").css({display:"none"}).siblings("span").show().siblings("i").show()}),w(".magnifier_big").mouseover(function(){w(".magnifie_move").show(),w(".magnifier_showpic").show()}),w(".magnifier_big").mouseout(function(){w(".magnifie_move").hide(),w(".magnifier_showpic").hide()}),w(".magnifier_big").mousemove(function(i){var n=i.pageX-w(".magnifier_big").offset().left-w(".magnifie_move").width()/2,s=i.pageY-w(".magnifier_big").offset().top-w(".magnifie_move").height()/2;n<0&&(n=0),n>w(this).width()-w(".magnifie_move").width()&&(n=w(this).width()-w(".magnifie_move").width()),s<0&&(s=0),s>w(this).height()-w(".magnifie_move").height()&&(s=w(this).height()-w(".magnifie_move").height()),w(".magnifie_move").css({left:n,top:s});var t=n/(w(".magnifier_big").width()-w(".magnifie_move").width()),e=s/(w(".magnifier_big").height()-w(".magnifie_move").height());w(".magnifier_showpic img").css({left:-t*(w(".magnifier_showpic img").width()-w(".magnifier_showpic").width()),top:-e*(w(".magnifier_showpic img").height()-w(".magnifier_showpic").height())})}),w(".goodsSizeList ul li").click(function(){w(this).addClass("chooseLogo").siblings().removeClass("chooseLogo")});var s=new XMLHttpRequest;s.open("get","http://localhost:8000/home"),s.onload=function(){!function(i){var n=i.data,s="";n.forEach(function(i){0,s+="\n                <li>\n                    <span>".concat(i.classifyName,"</span>\n                    <ul>\n                "),i.list.forEach(function(i){s+='\n                    <li>\n                        <a href="?'.concat(i.classifyId,'">').concat(i.classifyName,"</a>\n                    </li>\n                ")}),s+="   </ul>\n                 </li>\n                "}),w(".detail_goodslist").append(s),w(".detail_goodslist li span").click(function(){w(this).siblings("ul").toggleClass(" detail__ListHide")})}(JSON.parse(s.response))},s.send(),w.ajax({url:"http://localhost:8000/detail1",type:"GET",dataType:"json",success:function(i){var n=i.data,s="";n.forEach(function(i){s+='\n                    <li>\n                        <a href="?design='.concat(i.colorCode,'"><img src="https://www.only.cn').concat(i.picurls[0],'"></a>\n                        <span>￥').concat(i.price,"</span>\n                    </li>\n                    ")}),w(".detail_body_right ul").append(s)}}),w.ajax({url:"http://localhost:8000/detail2".concat(window.location.search),type:"GET",dataType:"json",success:function(h){console.log(h.data);var m=h.data.color,i="",n="",s="",t="",e="",o="",a="";w(".detail_main_title span").text("首页/".concat(h.data.goodsName)),i+='\n                <li><img src="https://www.only.cn'.concat(m[0].picurls[0],'"></li>\n                <li><img src="https://www.only.cn').concat(m[0].picurls[1],'"></li>\n                <li><img src="https://www.only.cn').concat(m[0].picurls[2],'"></li>\n                <li><img src="https://www.only.cn').concat(m[0].picurls[3],'"></li>\n                '),w(".magnifier_sm").append(i),w(".magnifier_sm li").click(function(){w(this).addClass("chooseItem").css({height:"170px"}).siblings().removeClass("chooseItem").css({height:"172px"});var i=w(this).index();0==i&&w(".magnifier_big img").attr("src","https://www.only.cn".concat(m[0].picurls[0])),1==i&&w(".magnifier_big img").attr("src","https://www.only.cn".concat(m[0].picurls[1])),2==i&&w(".magnifier_big img").attr("src","https://www.only.cn".concat(m[0].picurls[2])),3==i&&w(".magnifier_big img").attr("src","https://www.only.cn".concat(m[0].picurls[3]))}),n+='\n                        <span class="goods_price">价格</span>\n                        <span class="goods_nowPrice">￥'.concat(m[0].price,'</span>\n                        <span class="goods_lastPrice">吊牌价 ￥ ').concat(m[0].originalPrice,"</span>\n                        <i>促销</i>\n                        "),w(".priceline").append(n),s+="\n                        <h3>".concat(h.data.goodsName,"</h3>\n                        <p>产品编号:").concat(m[0].colorCode,"</p>"),w(".detail_goodsInfo").prepend(s),t+='\n                        <img src="https://www.only.cn'.concat(m[0].picurls[0],'">\n                        '),w(".magnifier_big").prepend(t),w(".magnifier_showpic").append(t),h.data.color.forEach(function(i){e+='\n                            <li>\n                                <img src="https://www.only.cn'.concat(i.picurls[1],'" alt="').concat(i.colorAlias,'">\n                                <span><img src="../../img/detail/rightlogo.png"></span>\n                            </li>\n                            ')}),w(".goodsColor ul").append(e);var c=parseInt(14*Math.random()+2);w(".goodsColor ul li").click(function(){w(this).addClass("chooseLogo").children("span").show().parent().siblings().removeClass("chooseLogo").children("span").hide();var n=w(this).index();w(".goodsCount p i").text(c+3*n);var s=w(".goodsCount p i").text();w(".goodsCount span").first().click(function(){var i=parseInt(w(".goodsCount div>i").text());i<s&&i++,w(".goodsCount div>i").text(i)}).siblings().click(function(){var i=parseInt(w(".goodsCount div>i").text());1<i&&i--,w(".goodsCount div>i").text(i)}),o+='\n                    <li><img src="https://www.only.cn'.concat(m[n].picurls[0],'"></li>\n                    <li><img src="https://www.only.cn').concat(m[n].picurls[1],'"></li>\n                    <li><img src="https://www.only.cn').concat(m[n].picurls[2],'"></li>\n                    <li><img src="https://www.only.cn').concat(m[n].picurls[3],'"></li>\n                    '),w(".magnifier_sm").empty(),w(".magnifier_sm").append(o),w(".magnifier_big>img").attr("src","https://www.only.cn".concat(m[n].picurls[0])),w(".magnifier_showpic>img").attr("src","https://www.only.cn".concat(m[n].picurls[0])),o="",w(".magnifier_sm li").click(function(){w(this).addClass("chooseItem").css({height:"170px"}).siblings().removeClass("chooseItem").css({height:"172px"});var i=w(this).index();0==i&&w(".magnifier_big img").attr("src","https://www.only.cn".concat(m[n].picurls[0])),1==i&&w(".magnifier_big img").attr("src","https://www.only.cn".concat(m[n].picurls[1])),2==i&&w(".magnifier_big img").attr("src","https://www.only.cn".concat(m[n].picurls[2])),3==i&&w(".magnifier_big img").attr("src","https://www.only.cn".concat(m[n].picurls[3]))})}),m.forEach(function(i){for(var n=0;n<i.picurls.length-1;n++)a+='\n                        <div>\n                            <img src="https://www.only.cn'.concat(i.picurls[n],'">\n                        </div>    \n                    ')}),a+='\n                    <div class="detail_body_middle_footerpic">\n                        <img src="../../img/detail/detail26.jpg">\n                    </div>  \n                ',w(".detail_body_middle").append(a),console.log(w(".goodsColor ul").children(".chooseLogo").length),w(".join_cart").click(function(){if(0==w(".goodsColor ul").children(".chooseLogo").length)alert("请选择商品颜色");else{var i=w(".goodsSizeList ul").children(".chooseLogo").text();console.log("尺寸=========",i);var n=w(".goodsColor ul").children(".chooseLogo").children("img").attr("alt");console.log("颜色=========",n);var s=window.location.search.replace(/[^0-9]/gi,"").substring(0,9);console.log("ID=========",s);var t=w(".goodsCount").children("div").children("i").text();console.log("数量=========",t);var e=w(".goodsColor ul").children(".chooseLogo").index(),o=h.data.goodsName;console.log("描述=========",o);var a=m[e].picurls[0];console.log("链接=========",a);var c=w(".goodsCount").children("p").children("i").text(),l=m[e].price,r=JSON.parse(localStorage.getItem("cart")),g=[];for(var p in r)g.push(r[p]);g.push({size:i,color:n,id:s,count:t,index:e,des:o,pic:a,priseNow:l,sell:c}),localStorage.setItem("cart",JSON.stringify(g));var d="";d+='\n                <li>\n                    <img src="https://www.only.cn'.concat(a,'">\n                    <div>\n                        <p class="smCartMessage_des">\n                            <label>').concat(o,"</label>\n                            <i>￥").concat(l,"</i> <b>x").concat(t,'</b>\n                        </p>\n                        <p class="smCartMessage_color">\n                            颜色：<i>').concat(n,'</i>\n                        </p>\n                        <p class="smCartMessage_size">\n                            尺码：<i>').concat(i,"</i>\n                        </p>\n                        <button>删除</button>\n                    </div>\n                </li>\n                "),w(".smCartMessage ul").append(d),w(".smCartMessage_size").siblings("button").click(function(){var i=JSON.parse(localStorage.getItem("cart")),n=w(this).parent("div").parent("li").index();w(this).parent("div").parent("li").remove(),i.splice(n,1),w(".smCartMessage>div p i").text(parseInt(w(".smCartMessage>div p i").text())-1),w(".specialCart>i").text(parseInt(w(".specialCart>i").text())-1),localStorage.setItem("cart",JSON.stringify(i))}),w(".specialCart>i").text(parseInt(w(".specialCart>i").text())+1),w(".smCartMessage>div p i").text(parseInt(w(".smCartMessage>div p i").text())+1),w(".addsuccess").show()}}),w(".addsuccess").children("p").children("span").click(function(){w(".addsuccess").hide()});var l=JSON.parse(localStorage.getItem("cart"));console.log(l);var r="";l.forEach(function(i){r+='\n                    <li>\n                        <img src="https://www.only.cn'.concat(i.pic,'">\n                        <div>\n                            <p class="smCartMessage_des">\n                                <label>').concat(i.des,"</label>\n                                <i>￥").concat(i.priseNow,"</i> <b>x").concat(i.count,'</b>\n                            </p>\n                            <p class="smCartMessage_color">\n                                颜色：<i>').concat(i.color,'</i>\n                            </p>\n                            <p class="smCartMessage_size">\n                                尺码：<i>').concat(i.size,"</i>\n                            </p>\n                            <button>删除</button>\n                        </div>\n                    </li>\n                ")}),w(".smCartMessage ul").append(r),w(".smCartMessage>div p i").text(l.length),w(".smCartMessage ul li button").click(function(){var i=w(this).parent("div").parent("li").index();w(this).parent("div").parent("li").remove(),l.splice(i,1),w(".smCartMessage>div p i").text(parseInt(w(".smCartMessage>div p i").text())-1),w(".specialCart>i").text(parseInt(w(".specialCart>i").text())-1),localStorage.setItem("cart",JSON.stringify(l))});var g=JSON.parse(localStorage.getItem("cart")).length;w(".specialCart>i").text(g)}})})});